<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>Alpha Auto Bot</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <style>
      body {
        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        margin: 0;
        padding: 12px 14px;
        min-width: 280px;
        color: #0f0f0f;
        background: #ffffff;
      }

      h1 {
        font-size: 16px;
        margin: 0 0 8px;
        font-weight: 600;
      }

      #summary-message {
        font-size: 13px;
        line-height: 1.4;
        margin-bottom: 12px;
      }

      #summary-grid {
        display: none;
        grid-template-columns: auto 1fr;
        column-gap: 12px;
        row-gap: 6px;
        font-size: 13px;
      }

      #summary-grid dt {
        font-weight: 600;
        color: #1a1a1a;
      }

      #summary-grid dd {
        margin: 0;
        text-align: right;
        color: #333333;
      }

      #controls {
        display: flex;
        gap: 8px;
        margin-bottom: 12px;
      }

      #controls button {
        flex: 1;
        padding: 6px 10px;
        font-size: 13px;
        font-weight: 600;
        border: none;
        border-radius: 6px;
        cursor: pointer;
        transition: opacity 0.15s ease;
      }

      #controls button:disabled {
        cursor: not-allowed;
        opacity: 0.45;
      }

      #control-start {
        background: #0ecb81;
        color: #ffffff;
      }

      #control-stop {
        background: #f6465d;
        color: #ffffff;
      }

      #control-refresh {
        background: #f0f1f3;
        color: #1a1a1a;
      }

      #settings {
        display: flex;
        flex-direction: column;
        gap: 4px;
        margin-bottom: 12px;
      }

      #settings label {
        font-size: 12px;
        font-weight: 600;
        color: #1a1a1a;
      }

      #settings input {
        padding: 6px 8px;
        font-size: 13px;
        border-radius: 6px;
        border: 1px solid #d0d5dd;
      }

      #settings input:focus {
        outline: none;
        border-color: #0ecb81;
        box-shadow: 0 0 0 1px rgba(14, 203, 129, 0.2);
      }

      .token-display {
        padding: 6px 8px;
        font-size: 13px;
        border-radius: 6px;
        border: 1px solid #d0d5dd;
        background: #f9fafb;
        display: flex;
        flex-direction: column;
        gap: 2px;
      }

      .token-display.token-display--invalid {
        border-color: #fbd3d9;
        background: #fff5f6;
        color: #c20d27;
      }

      .token-display__symbol {
        font-weight: 600;
        color: #1a1a1a;
      }

      .token-display__address {
        font-size: 12px;
        color: #4a4f55;
        word-break: break-all;
      }
    </style>
  </head>
  <body>
    <h1>Automation Status</h1>
    <div id="controls">
      <button id="control-start" type="button">Start</button>
      <button id="control-stop" type="button">Stop</button>
      <button id="control-refresh" type="button">Refresh VWAP</button>
    </div>
    <div id="settings">
      <label>Current token</label>
      <div id="control-token-display" class="token-display">
        <div id="control-token-symbol" class="token-display__symbol">—</div>
        <div id="control-token-address" class="token-display__address">—</div>
      </div>

      <label for="control-spread">Price offset (%)</label>
      <input
        id="control-spread"
        type="number"
        min="0"
        max="5"
        step="0.001"
        inputmode="decimal"
        placeholder="0.01"
        value="0.01"
        title="Adjust how far limit orders deviate from VWAP"
      />

      <label for="control-points-factor">Points factor</label>
      <input
        id="control-points-factor"
        type="number"
        min="1"
        max="1000"
        step="1"
        inputmode="numeric"
        placeholder="1"
        value="1"
        title="Multiplier applied to recorded buy volume after each successful order"
      />

      <label for="control-points-target">Points target</label>
      <input
        id="control-points-target"
        type="number"
        min="1"
        max="1000"
        step="1"
        inputmode="numeric"
        placeholder="15"
        value="15"
        title="Stop automation once today's alpha points exceed this threshold"
      />
    </div>
    <div id="summary-message">Loading automation data…</div>
    <dl id="summary-grid">
      <dt>Average price</dt>
      <dd id="summary-price">—</dd>

      <dt>Today's buy volume (UTC)</dt>
      <dd id="summary-daily-volume">—</dd>

      <dt>Today's alpha points</dt>
      <dd id="summary-alpha-points">—</dd>

      <dt>Buy volume to next point</dt>
      <dd id="summary-alpha-next">—</dd>

      <dt>Today's successful trades</dt>
      <dd id="summary-successful-trades">—</dd>

      <dt>Today's first balance (UTC)</dt>
      <dd id="summary-first-balance">—</dd>

      <dt>Current balance</dt>
      <dd id="summary-current-balance">—</dd>

      <dt>Today's total cost (UTC)</dt>
      <dd id="summary-total-cost">—</dd>

      <dt>Cost ratio</dt>
      <dd id="summary-cost-ratio">—</dd>

      <dt>Timestamp</dt>
      <dd id="summary-timestamp">—</dd>
    </dl>

    <script type="module" src="popup.js"></script>
  </body>
</html>
